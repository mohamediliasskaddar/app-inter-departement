<div class="dashboard-container">
  
  <!-- ðŸŸ¡ Welcome Banner -->
  <div class="welcome-banner" *ngIf="user">
    Bonjour <strong>{{ user.nom }}</strong> â€“ {{ user.role }} â€“ {{ user.departement }}
  </div>

  <!-- ðŸŸ£ Publication Stats Section -->
  <section class="publication-stats">
    <!--to do:  voir toutes les publications btn  -->

    <h5>Statistiques des Publications par Type</h5>
    <div class="stats-grid">
      <div class="stat-card reclamation">
        <h4>RÃ©clamations</h4>
        <p>{{ publicationStats['reclamation'] }}</p>
      </div>
      <div class="stat-card demande">
        <h4>Demandes</h4>
        <p>{{ publicationStats['demande'] }}</p>
      </div>
      <div class="stat-card incident">
        <h4>Incidents</h4>
        <p>{{ publicationStats['incident'] }}</p>
      </div>
      <div class="stat-card audit">
        <h4>Audits</h4>
        <p>{{ publicationStats['audit'] }}</p>
      </div>
      <div class="stat-card information">
        <h4>Informations</h4>
        <p>{{ publicationStats['information'] }}</p>
      </div>
      <div class="stat-card autre">
        <h4>Autres</h4>
        <p>{{ publicationStats['autre'] }}</p>
      </div>
    </div>
  </section>

  <!-- ðŸŸ¢ Recent Publications -->
  <section class="recent-publications">
    <h5>DerniÃ¨res Publications</h5>
    <ul>
      <li *ngFor="let pub of recentPublications | slice:0:5">
        <strong>{{ pub.titre }}</strong> â€“ {{ pub.type }} â€“ {{ pub.date | date:'short' }}<br>
        {{ pub.auteur.nom }} {{ pub.auteur.prenom }} â€“ {{ pub.auteur.role }}<br>
        {{ pub.description }} â€“ {{ pub.statut }}

        <p>{{pub.image}} </p>

        <img *ngIf="pub.image"
     [src]="'http://localhost:3000/' + pub.image"
     alt="Publication image"
     class="img-fluid" />

      </li>
    </ul>
  </section>

  <!-- ðŸ”µ Recent Notifications -->
  <section class="recent-notifications">
    <h5>DerniÃ¨res Notifications</h5>
    <p>Total Notifications: {{ totalNotifications }}</p>
    <ul>
      <li *ngFor="let not of recentNotifications | slice:0:5">
        {{ not.description }} â€“ {{ not.dateEnvoi | date:'short' }} â€“ {{ not.type }} â€“ {{ not.lu ? 'Lu' : 'Non Lu' }}
      </li>
    </ul>
  </section>

  <!-- ðŸŸ  Quick Actions (optional, you mentioned it but didnâ€™t include content) -->
  <section class="quick-actions">
    <!-- Add buttons or links for quick actions -->
    
     <!-- <a routerLink="/pubComposer" routerLinkActive="active">new pub</a> -->
      <button (click)="openCreatePublicationDialog()" class="btn btn-success mb-3">
         CrÃ©er une publication
    </button>

    <button
      (click)="openCreateMessageDialog()" class="btn btn-primary mb-3">
       Composer un message
    </button>
    <button
      (click)="openCreateTableauDialog()" class="btn btn-primary mb-3"> 
       Composer un tableau
    </button>
      <!-- <a routerLink="/msgComposer" routerLinkActive="active">|new msg</a>
      <a routerLink="/tabComposer" routerLinkActive="active"> |new tab</a> -->
    <!-- Example: New Publication, New Task, New Message -->
  </section>

  <!-- to do : un petit calendrier ou un graphique KPI si tu peux -->

</div>





<style>
  .dashboard-container {
  padding: 2rem;
  max-width: 1200px;
  margin: auto;
}

.welcome-banner {
  background-color: #f0f4f8;
  padding: 1rem;
  margin-bottom: 2rem;
  font-size: 1.1rem;
  border-radius: 5px;
}

.publication-stats {
  margin-bottom: 2rem;
}

.stats-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
}

.stat-card {
  background: #fff;
  border-radius: 6px;
  padding: 1rem;
  flex: 1 1 150px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* Optional color themes per type */
.stat-card.reclamation { background-color: #fdecea; }
.stat-card.demande     { background-color: #e6f7ff; }
.stat-card.incident    { background-color: #fff7e6; }
.stat-card.audit       { background-color: #e8f5e9; }
.stat-card.information { background-color: #f3e5f5; }
.stat-card.autre       { background-color: #f0f0f0; }

.recent-publications,
.recent-notifications {
  margin-bottom: 2rem;
}

.recent-publications ul,
.recent-notifications ul {
  list-style-type: none;
  padding: 0;
}

.recent-publications li,
.recent-notifications li {
  padding: 0.5rem 0;
  border-bottom: 1px solid #ddd;
}

</style>